<div ui-tree-handle class="tree-node tree-node-content">
	<div data-ng-switch="element.type" data-nodrag="{{syllabusLockService.lockError}}" data-ng-class="['element-host', {'important': element.important, 'no-buttons': !userService.canEditElement(element,syllabusService.syllabus)}]">
		<element-buttons data-ng-if="userService.isAllowed('syllabusWrite', syllabusService.syllabus) && !syllabusLockService.lockError" data-element-buttons="element" data-noedit="!userService.canEditElement(element,syllabusService.syllabus) || element.type === 'rubric'" data-nodelete="!userService.canEditElement(element,syllabusService.syllabus)" data-nodrag="!userService.canEditElement(element,syllabusService.syllabus)" data-disabled="syllabusService.working" data-ng-class="['element-buttons', {'composite': element.composite}]"></element-buttons>

		<!-- From common notice -->
		<div data-ng-if="userService.isAllowed('syllabusWrite', syllabusService.syllabus) && !userService.canEditElement(element,syllabusService.syllabus) && !element.composite" class="from-common">
			<span class="glyphicon glyphicon-eye-open" title="{{ 'FROM_COMMON' | translate }}"></span>
		</div>

		<!-- Not published notice -->
		<div data-ng-if="!element.equalsPublished && userService.isAllowed('syllabusWrite', syllabusService.syllabus)" class="notice not-published">
			<h3><span class="glyphicon glyphicon-flag"></span> {{ 'NOT_PUBLISHED' | translate }}</h3>
		</div>

		<!-- Hidden by resource flag -->
		<div data-ng-if="isElementHiddenByResourceFlag(element)" class="notice hidden-by-resource-flag">
			<h3><span class="glyphicon glyphicon-flag"></span> {{ 'HIDDEN_BY_RESOURCE_FLAG' | translate }}</h3>
		</div>

		<!-- Hidden by date notice -->
		<div data-ng-if="isElementHiddenByDate(element) && userService.isAllowed('syllabusWrite', syllabusService.syllabus)" class="notice hidden-by-date">
			<h3><span class="glyphicon glyphicon-flag"></span> {{ getElementHiddenByDateMessage(element) }}</h3>
		</div>

		<div data-ng-class="['element-wrapper', {'important': element.important, 'hidden-by-date': isElementHiddenByDate(element) && !element.composite && userService.isAllowed('syllabusWrite', syllabusService.syllabus), 'not-published': !element.equalsPublished && !element.composite && userService.isAllowed('syllabusWrite', syllabusService.syllabus)}]">
			<div data-ng-if="element.important" class="important-notice">
				<h3>{{ 'FORM_IMPORTANT' | translate }}</h3>
			</div>

			<cluster-element data-ng-switch-when="composite" data-cluster-element="element"></cluster-element>

			<!-- Lecture element -->
			<course-element data-ng-switch-when="lecture" data-course-element="element"></course-element>

			<!-- Tutorial element -->
			<course-element data-ng-switch-when="tutorial" data-course-element="element"></course-element>

			<!-- Evaluation element -->
			<div data-ng-switch-when="evaluation" data-evaluation-element="element" data-index="$index"></div>
			
			<!-- Exam element -->
			<div data-ng-switch-when="exam" data-exam-element="element" data-index="$index"></div>

			<!-- Rubric element -->
			<rubric-element data-nodrag data-ng-switch-when="rubric" data-rubric-element="element"></rubric-element>

			<!-- Text element -->
			<text-element data-ng-switch-when="text" data-text-element="element"></text-element>

			<!-- Document element -->
			<document-element data-ng-switch-when="document" data-document-element="element"></document-element>

			<!-- Citation element -->
			<div data-ng-switch-when="citation" data-reference-element="element"></div>
			
			<!-- Hyperlink element -->
			<hyperlink-element data-ng-switch-when="hyperlink" data-hyperlink-element="element"></hyperlink-element>

			<!-- Image element -->
			<image-element data-ng-switch-when="image" data-image-element="element"></image-element>
			
			<!-- Video element -->
			<video-element data-ng-switch-when="video" data-video-element="element"></video-element>

			<!-- Contact element -->
			<div data-ng-switch-when="contact_info" data-contact-element="element"></div>

			<!-- Tool element -->
			<tool-element data-ng-switch-when="sakai_entity" data-tool-element="element"></tool-element>

			<div ng-switch-default>
				<!-- Attributes -->
				<div class="attributs" data-ng-switch="element.type">
					<div data-ng-switch-when="text">
					</div>
					<ul ng-switch-default>
						<li data-ng-repeat="(key, value) in element.attributes">
							{{key}} : {{value}}
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
